"use strict";(()=>{var e=Object.defineProperty,t=(t,n)=>e(t,"name",{value:n,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_fetch_ts-app_assets_modules_github_form_ts-app_assets_modules_githu-dec477"],{63621:(e,n,i)=>{i.d(n,{H:()=>o,v:()=>r});var s=i(59753);function r(){const e=document.getElementById("ajax-error-message");e&&(e.hidden=!1)}function o(){const e=document.getElementById("ajax-error-message");e&&(e.hidden=!0)}t(r,"showGlobalError"),t(o,"hideGlobalError"),(0,s.on)("deprecatedAjaxError","[data-remote]",(function(e){const t=e.detail,{error:n,text:i}=t;e.currentTarget===e.target&&("abort"===n||"canceled"===n||(/<html/.test(i)?(r(),e.stopImmediatePropagation()):setTimeout((function(){e.defaultPrevented||r()}),0)))})),(0,s.on)("deprecatedAjaxSend","[data-remote]",(function(){o()})),(0,s.on)("click",".js-ajax-error-dismiss",(function(){o()}))},66963:(e,n,i)=>{i.d(n,{D:()=>a,a:()=>o});var s=i(99997),r=i(5638);async function o(e,t,n){const i=new Request(t,n);i.headers.append("X-Requested-With","XMLHttpRequest");const o=await self.fetch(i);if(o.status<200||o.status>=300)throw new Error(`HTTP ${o.status}${o.statusText||""}`);return(0,s.t)((0,s.P)(e),o),(0,r.r)(e,await o.text())}function a(e,n,i=1e3){return t((async function t(i){const s=new Request(e,n);s.headers.append("X-Requested-With","XMLHttpRequest");const r=await self.fetch(s);if(r.status<200||r.status>=300)throw new Error(`HTTP ${r.status}${r.statusText||""}`);if(200===r.status)return r;if(202===r.status)return await new Promise((e=>setTimeout(e,i))),t(1.5*i);throw new Error(`Unexpected ${r.status} response status from poll endpoint`)}),"poll")(i)}t(o,"fetchSafeDocumentFragment"),t(a,"fetchPoll")},57654:(e,n,i)=>{i.d(n,{Bt:()=>c,DN:()=>l,KL:()=>f,Se:()=>u,qC:()=>p,sw:()=>d});var s=i(59753),r=i(2077),o=i(63621);function a(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:n}))}function c(e,t){t&&(h(e,t),(0,r.j)(t)),a(e,"submit",!0)&&e.submit()}function h(e,t){if(!(e instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw new TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw new Error("The specified element is not owned by the form element.")}function u(e,t){if("boolean"==typeof t){if(!(e instanceof HTMLInputElement))throw new TypeError("only checkboxes can be set to boolean value");e.checked=t}else{if("checkbox"===e.type)throw new TypeError("checkbox can't be set to string value");e.value=t}a(e,"change",!1)}function l(e,t){for(const n in t){const i=t[n],s=e.elements.namedItem(n);(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&(s.value=i)}}function d(e){if(!(e instanceof HTMLElement))return!1;const t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n||e.isContentEditable}function m(e){return new URLSearchParams(e)}function f(e,t){const n=new URLSearchParams(e.search),i=m(t);for(const[e,t]of i)n.append(e,t);return n.toString()}function p(e){return m(new FormData(e)).toString()}(0,s.on)("click",".js-remote-submit-button",(async function(e){const t=e.currentTarget.form;let n;e.preventDefault();try{n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}n&&!n.ok&&(0,o.v)()})),t(a,"fire"),t(c,"requestSubmit"),t(h,"checkButtonValidity"),t(u,"changeValue"),t(l,"fillFormValues"),t(d,"isFormField"),t(m,"searchParamsFromFormData"),t(f,"combineGetFormSearchParams"),t(p,"serialize")},99997:(e,n,i)=>{function s(e){const t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map((e=>e.content));if(t.length<1)throw new Error("could not find html-safe-nonce on document");return t}i.d(n,{P:()=>s,t:()=>o}),t(s,"getDocumentHtmlSafeNonces");class r extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),this.response=t}}function o(e,t,n=!1){const i=t.headers.get("content-type")||"";if(!n&&!i.startsWith("text/html"))throw new r(`expected response with text/html, but was ${i}`,t);if(n&&!i.startsWith("text/html")&&!i.startsWith("application/json"))throw new r(`expected response with text/html or application/json, but was ${i}`,t);const s=t.headers.get("x-html-safe");if(!s)throw new r("missing X-HTML-Safe nonce",t);if(!e.includes(s))throw new r("response X-HTML-Safe nonce did not match",t)}t(r,"ResponseError"),t(o,"verifyResponseHtmlSafeNonce")},10965:(e,n,i)=>{var s=i(90420),r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=t(((e,t,n,i)=>{for(var s,a=i>1?void 0:i?o(t,n):t,c=e.length-1;c>=0;c--)(s=e[c])&&(a=(i?s(t,n,a):s(a))||a);return i&&a&&r(t,n,a),a}),"__decorateClass");let c=t(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const e=this.closest("details");e&&e.addEventListener("toggle",(()=>{e.open&&this.source.focus()}))}relayKeydown(e){if(!this.isControlTab(e.target)&&e.target!==this.source||"ArrowDown"!==e.key&&"Tab"!==e.key){if("Escape"===e.key){const e=this.closest("details");e&&e.removeAttribute("open")}}else e.preventDefault(),e.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"))}isControlTab(e){return!(!e||!this.control)&&Array.from(this.control.children).includes(e)}relayInput(e){if(!e.target)return;const t=e.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:t}))}routeCustomEvent(e){this.sinks[this.selectedIndex].dispatchEvent(e)}get selectedIndex(){if(!this.control)return 0;const e=this.control.querySelector('[aria-selected="true"]');return e?Array.from(this.control.children).indexOf(e):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(e){this.source.value=this.storedInput[this.selectedIndex];const t=e.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=t,this.source.setAttribute("aria-label",t),this.notifySelected()}notifySelected(){const e=this.sinks[this.selectedIndex],t=new CustomEvent("tab-selected");e.dispatchEvent(t)}},"InputDemuxElement");a([s.fA],c.prototype,"source",2),a([s.GO],c.prototype,"sinks",2),a([s.fA],c.prototype,"control",2),c=a([s.Ih],c)},43721:(e,n,i)=>{i.d(n,{ZG:()=>c,q6:()=>u,w4:()=>h});var s=i(8439);let r=!1;const o=new s.Z;function a(e){const t=e.target;if(t instanceof HTMLElement&&t.nodeType!==Node.DOCUMENT_NODE)for(const e of o.matches(t))e.data.call(null,t)}function c(e,t){r||(r=!0,document.addEventListener("focus",a,!0)),o.add(e,t),document.activeElement instanceof HTMLElement&&document.activeElement.matches(e)&&t(document.activeElement)}function h(e,n,i){function s(t){const n=t.currentTarget;!n||(n.removeEventListener(e,i),n.removeEventListener("blur",s))}t(s,"blurHandler"),c(n,(function(t){t.addEventListener(e,i),t.addEventListener("blur",s)}))}function u(e,n){function i(e){const{currentTarget:t}=e;!t||(t.removeEventListener("input",n),t.removeEventListener("blur",i))}t(i,"blurHandler"),c(e,(function(e){e.addEventListener("input",n),e.addEventListener("blur",i)}))}t(a,"handleFocus"),t(c,"onFocus"),t(h,"onKey"),t(u,"onInput")},37505:(e,n,i)=>{var s=i(41891),r=i(69567),o=i(90420),a=i(17945),c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u=t(((e,t,n,i)=>{for(var s,r=i>1?void 0:i?h(t,n):t,o=e.length-1;o>=0;o--)(s=e[o])&&(r=(i?s(t,n,r):s(r))||r);return i&&r&&c(t,n,r),r}),"__decorateClass");let l=t(class extends HTMLElement{constructor(){super(...arguments),this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const e=this.isMobileViewport,t=this.windowHeight;this.updateViewportSize();const n=e!==this.isMobileViewport,i=t!==this.windowHeight;if(n)return this.virtualizedList.destroy(),void this.setupVirtualizedList();!this.isMobileViewport||!i||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType="branch"===this.getRequiredAttr("type")?s.r.Branch:s.r.Tag;const e=this.getAttribute("current-committish");this.currentCommittish=e?atob(e):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const t=this.getRequiredAttr("query-endpoint"),n=this.getRequiredAttr("cache-key");this.index=new s.W(this.refType,this,t,n,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(e){this.input=e.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(e,t){return new r.R(e,t,r.XK)}renderRow(e){const t=this.index.currentSearchResult[e];if(!t&&e>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:e,refName:this.input});if(!t){const t=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=t),this.renderTemplate(this.noMatchTemplate,{index:e,isCurrent:t,refName:this.input})}const n=this.input.length>0,i=n?"is-filtering":"",s=t===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=s);const r=this.renderTemplate(this.itemTemplate,{refName:t,index:e,isFilteringClass:i,urlEncodedRefName:this.urlEncodeRef(t),isCurrent:s,isNotDefault:t!==this.defaultBranch});if(n){const e=r.querySelector("span");e.textContent="";const n=t.split(this.input),i=n.length-1;for(let t=0;t<n.length;t++){const s=n[t];if(e.appendChild(document.createTextNode(s)),t<i){const t=document.createElement("b");t.textContent=this.input,e.appendChild(t)}}}return r}urlEncodeRef(e){return encodeURIComponent(e).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList)return this.index.search(this.input),void this.setupVirtualizedList();this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?.3*this.windowHeight:330}get listLength(){const e=this.index.currentSearchResult.length;return this.showCreateRow?e+1:e||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&""!==this.input&&this.canCreate}getRequiredAttr(e,t=this){const n=t.getAttribute(e);if(!n)throw new Error(`Missing attribute for ${t}: ${e}`);return n}setupFetchListeners(){const e=this.closest("details");let n=!1;const i=t((()=>{n||(this.index.fetchData(),n=!0)}),"fetch");if(!e||e.open)return void i();this.prefetchOnMouseover&&e.addEventListener("mouseover",i,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const s=e.querySelector("input[data-ref-filter]");s&&(s.addEventListener("input",(()=>{this.input=s.value,this.render()})),s.addEventListener("keydown",(t=>{if("ArrowDown"===t.key||"Tab"===t.key)t.preventDefault(),t.stopPropagation(),this.focusFirstListMember();else if("Enter"===t.key){let n=this.index.currentSearchResult.indexOf(this.input);if(-1===n){if(!this.showCreateRow)return;n=this.listLength-1}e.querySelector(`[data-index="${n}"]`).click(),t.preventDefault()}})))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(e){e.target instanceof HTMLInputElement&&e.target.checked&&e.target.value&&(this.currentCommittish=e.target.value)}keydown(e){if(null!==this.currentSelectionIndex){if("Enter"===e.key){const t=document.activeElement;if(!t)return;return t.click(),void e.preventDefault()}if(("Tab"!==e.key||!e.shiftKey)&&"Escape"!==e.key)switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break;case"Home":this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break;case"End":this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break;case"Tab":case"ArrowDown":this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex)}}}focusItemAtIndex(e){this.virtualizedList.scrollToIndex(e,"center"),setTimeout((()=>{const t=this.listContainer.querySelector(`[data-index="${e}"]`);t&&t.focus()}),20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new a.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:e=>{const t=this.isMobileViewport?54:33;return this.showCreateRow&&e===this.listLength-1?51:t},onRowsRendered:()=>{var e;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),null==(e=this.hiddenCurrentElement)||e.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");u([o.fA],l.prototype,"listContainer",2),u([o.fA],l.prototype,"itemTemplate",2),u([o.fA],l.prototype,"noMatchTemplate",2),u([o.fA],l.prototype,"fetchFailedTemplate",2),u([o.fA],l.prototype,"hiddenCurrentItemTemplate",2),l=u([o.Ih],l)},41891:(e,n,i)=>{i.d(n,{W:()=>d,r:()=>u});var s=i(31579),r=i(77552);const{getItem:o,setItem:a,removeItem:c}=(0,s.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var h,u=((h=u||{}).Branch="branch",h.Tag="tag",h);const l=t(class{constructor(e,t,n,i,s){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.searchTerm="",this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=e,this.selector=t,this.refEndpoint=n,this.cacheKey=i,this.nameWithOwner=s}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(e){if(this.emitStats(e),!e.ok)return void(this.fetchFailed=!0);const t=e.clone(),n=await e.json();this.knownItems=n.refs,this.cacheKey=n.cacheKey,this.flushToLocalStorage(await t.text())}emitStats(e){if(e.ok)switch(e.status){case 200:(0,r.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break;case 304:(0,r.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break;default:(0,r.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}else(0,r.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0)}search(e){if(this.searchTerm=e,""===e)return void(this.currentSearchResult=this.knownItems);const t=[],n=[];let i;this.exactMatchFound=!1;for(const s of this.knownItems)if(i=s.indexOf(e),!(i<0)){if(0===i){e===s?(n.unshift(s),this.exactMatchFound=!0):n.push(s);continue}t.push(s)}this.currentSearchResult=[...n,...t]}bootstrapFromLocalStorage(){const e=o(this.localStorageKey);if(!e)return!1;const t=JSON.parse(e);return t.cacheKey===this.cacheKey&&"refs"in t?(this.knownItems=t.refs,this.isLoading=!1,(0,r.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0):(c(this.localStorageKey),!1)}async flushToLocalStorage(e){try{a(this.localStorageKey,e)}catch(t){if(!t.message.toLowerCase().includes("quota"))throw t;this.clearSiblingLocalStorage(),(0,r.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{a(this.localStorageKey,e)}catch(e){e.message.toLowerCase().includes("quota")&&(0,r.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}}clearSiblingLocalStorage(){for(const e of Object.keys(localStorage))e.startsWith(l.LocalStoragePrefix)&&c(e)}get localStorageKey(){return`${l.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let d=l;d.LocalStoragePrefix="ref-selector"},2077:(e,n,i)=>{function s(e){const t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let n=r(t);if(e.name){const i=e.matches("input[type=submit]")?"Submit":"",s=e.value||i;n||(n=document.createElement("input"),n.type="hidden",n.classList.add("is-submit-button-value"),t.prepend(n)),n.name=e.name,n.value=s}else n&&n.remove()}function r(e){const t=e.querySelector("input.is-submit-button-value");return t instanceof HTMLInputElement?t:null}i.d(n,{j:()=>s,u:()=>r}),t(s,"persistSubmitButtonValue"),t(r,"findPersistedSubmitButtonValue")},39688:(e,n,i)=>{var s=i(64463);const r=t((()=>{const e=document.getElementById("spoof-warning");if(!e)return;const t=document.querySelector(".commit-title");t&&t.classList.add("pb-1"),e.hidden=!1,e.removeAttribute("aria-hidden")}),"showSpoofCommitBanner");(0,s.N7)("#js-spoofed-commit-warning-trigger",{add:r})},16246:(e,n,i)=>{i.d(n,{RB:()=>r,qC:()=>o,w0:()=>s});class s{constructor(e){this.closed=!1,this.unsubscribe=()=>{e(),this.closed=!0}}}function r(e,t,n,i={capture:!1}){return e.addEventListener(t,n,i),new s((()=>{e.removeEventListener(t,n,i)}))}function o(...e){return new s((()=>{for(const t of e)t.unsubscribe()}))}t(s,"Subscription"),t(r,"fromEvent"),t(o,"compose")}}])})();